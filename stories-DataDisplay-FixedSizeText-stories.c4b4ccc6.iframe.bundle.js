/*! For license information please see stories-DataDisplay-FixedSizeText-stories.c4b4ccc6.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkdr_pe_ui_storybook=self.webpackChunkdr_pe_ui_storybook||[]).push([[8148],{"./node_modules/@babel/runtime/helpers/esm/objectSpread2.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_objectSpread2});var _defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__.d(__webpack_exports__,{Z:()=>_objectWithoutProperties})},"./src/Components/DataDisplay/FixedSizeText/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>FixedSizeText});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),client=__webpack_require__("./node_modules/react-dom/client.js");const style_module_fixedSizeText_wrap="style_fixedSizeText_wrap__owTkj";var cloneNode=function cloneNode(el){return el.cloneNode(!1)},findChildNode=function findChildNode(_ref){for(var el=_ref.el,container=_ref.container,maxLength=_ref.maxLength,index=_ref.index,i=0;i<el.childNodes.length;){if(index.current>=maxLength)return void(i=el.childNodes.length);var child=el.childNodes[i];if(child instanceof Text){var _child$textContent,text=null!==(_child$textContent=child.textContent)&&void 0!==_child$textContent?_child$textContent:"";if(index.current+text.length>maxLength){var val=text.slice(0,maxLength-index.current);container.appendChild(document.createTextNode(val)),index.current+=val.length,i=el.childNodes.length}else{index.current+=text.length;var cloneText=cloneNode(child);container.appendChild(cloneText),++i}}else if(child){var node=cloneNode(child);container.appendChild(node),findChildNode({el:child,container:node,maxLength,index}),++i}}},react_dom=__webpack_require__("./node_modules/react-dom/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["nodeOnOverflow","style","className","content","before","after"],FixedSizeText=(0,react.forwardRef)((function(_ref,_ref3){var _textContent$current,_ref$nodeOnOverflow=_ref.nodeOnOverflow,nodeOnOverflow=void 0===_ref$nodeOnOverflow?"...":_ref$nodeOnOverflow,style=_ref.style,className=_ref.className,content=_ref.content,before=_ref.before,after=_ref.after,props=(0,objectWithoutProperties.Z)(_ref,_excluded);FixedSizeText.displayName="FixedSizeText";var textRef=(0,react.useRef)(null),wrapRef=(0,react.useRef)(null),textContent=(0,react.useRef)(),_useState=(0,react.useState)((function(){return!1})),_useState2=(0,slicedToArray.Z)(_useState,2),visible=_useState2[0],setVisible=_useState2[1];return(0,react.useLayoutEffect)((function(){var el=wrapRef.current,destroy=!1,createReadonlyNode=null,root=void 0,timer=null,destroyNode=function destroyNode(){var _root,_createReadonlyNode;null===(_root=root)||void 0===_root||_root.unmount(),null===(_createReadonlyNode=createReadonlyNode)||void 0===_createReadonlyNode||_createReadonlyNode.remove()},setHtml=function setHtml(el,length){var textEl=textRef.current;if(textEl){var htmlStr=length?function sliceNode(el,length){var container=cloneNode(el);findChildNode({el,container,maxLength:length,index:{current:0}}),document.body.append(container);var text=container.innerHTML;return container.remove(),text}(el,length):el.innerHTML;textEl.innerHTML=htmlStr,textContent.current=htmlStr}},handleChangeFn=function handleChangeFn(){timer&&window.clearTimeout(timer),function restNode(){return new Promise((function(resolve,reject){var app=(0,react.createElement)("div",{ref:function ref(_ref2){destroy?reject():resolve(_ref2)},style:{display:"none"}},content);createReadonlyNode=document.createElement("div"),(root=(0,client.createRoot)(createReadonlyNode)).render(app),document.body.appendChild(createReadonlyNode)}))}().then((function(res){var textEl=textRef.current;if(res&&el&&textEl){setHtml(res);var offsetHeight=el.offsetHeight,scrollHeight=el.scrollHeight;if(scrollHeight-4<=offsetHeight)return setVisible(!1),void destroyNode();var status=0,total=res.innerText.length,length=Math.ceil(offsetHeight/scrollHeight*total);setHtml(res,length);var main=function main(){if(destroy)destroyNode();else{if(offsetHeight=el.offsetHeight,scrollHeight=el.scrollHeight,1===status)return scrollHeight-4<=offsetHeight?void destroyNode():(status=1,--length,setHtml(res,length),void main());scrollHeight-4<=offsetHeight?(status=-1,++length):(status=1,--length),setHtml(res,length),main()}};(0,react_dom.flushSync)((function(){setVisible((function(){return timer=window.setTimeout((function(){timer=null,destroy||main()})),!0}))}))}}))},resizeFn=function resizeFn(e){timer&&window.clearTimeout(timer),timer=window.setTimeout((function(){timer=null,destroy||handleChangeFn()}),e?void 0:50)};resizeFn();var observer=new MutationObserver(handleChangeFn);return el&&observer.observe(el,{attributes:!0,characterData:!0}),document.fonts.addEventListener("loading",handleChangeFn),window.addEventListener("resize",resizeFn),function(){observer.disconnect(),destroy=!0,document.fonts.removeEventListener("loading",handleChangeFn),window.removeEventListener("resize",resizeFn),destroyNode(),timer&&window.clearTimeout(timer)}}),[nodeOnOverflow,content,before,after]),(0,jsx_runtime.jsxs)("div",(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{className:style_module_fixedSizeText_wrap+(className?" ".concat(className):""),ref:function ref(el){wrapRef.current=el,"function"==typeof _ref3?_ref3(el):null!==_ref3&&(_ref3.current=el)},style,children:[before,(0,jsx_runtime.jsx)("span",{ref:textRef,dangerouslySetInnerHTML:{__html:null!==(_textContent$current=textContent.current)&&void 0!==_textContent$current?_textContent$current:""}}),visible?nodeOnOverflow:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),after]}))}));FixedSizeText.displayName="FixedSizeText";try{FixedSizeText.displayName="FixedSizeText",FixedSizeText.__docgenInfo={description:"",displayName:"FixedSizeText",props:{nodeOnOverflow:{defaultValue:{value:"..."},description:"溢出时结尾处要展示的节点\n默认值\n...\n\n* 如果传入的是一个 React Element建议用useMemo包起来\n* 不然会导致不必要的重新渲染\n* 如果是string类型 不用\n* 原因: {a:1} !== {a:1}\n* 但是 1 === 1;",name:"nodeOnOverflow",required:!1,type:{name:"ReactNode"}},content:{defaultValue:null,description:"文本内容\n\n* 同nodeOnOverflow",name:"content",required:!1,type:{name:"ReactNode"}},before:{defaultValue:null,description:"在文本前插入的节点\n始终都会展示\n* 同nodeOnOverflow",name:"before",required:!1,type:{name:"ReactNode"}},after:{defaultValue:null,description:"在文本后插入的节点\n始终都会展示\n\n* 同nodeOnOverflow",name:"after",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Components/DataDisplay/FixedSizeText/index.tsx#FixedSizeText"]={docgenInfo:FixedSizeText.__docgenInfo,name:"FixedSizeText",path:"src/Components/DataDisplay/FixedSizeText/index.tsx#FixedSizeText"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"./src/stories/DataDisplay/FixedSizeText.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TempArgs:()=>TempArgs,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_Components_DataDisplay_FixedSizeText__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Components/DataDisplay/FixedSizeText/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["style"];const __WEBPACK_DEFAULT_EXPORT__={title:"DataDisplay/FixedSizeText",component:_Components_DataDisplay_FixedSizeText__WEBPACK_IMPORTED_MODULE_1__.H};var TempArgs=function Template(_ref){var style=_ref.style,args=(0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_ref,_excluded),_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({width:"20rem",height:"5rem"}),_useState2=(0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState,2),styles=_useState2[0],setStyles=_useState2[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var timer=window.setTimeout((function(){setStyles({width:"20rem",height:"5rem"})}),500);return function(){window.clearTimeout(timer)}}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Components_DataDisplay_FixedSizeText__WEBPACK_IMPORTED_MODULE_1__.H,(0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},args),{},{style:(0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},style),{},{width:styles.width,height:styles.height})}))}.bind({});TempArgs.args={content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"11"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"12"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"13"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"14"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"15"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"16"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"17"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"18"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"19"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"20"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"21"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"22"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"23"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"abc"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"def"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"ghi"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"jkl"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"mno"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"pqr"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"stu"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"vwx"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"yz"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:"块文本1"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:"块文本2"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:"块文本3"})]}),style:{maxWidth:"50%",width:"50%",height:"5rem"},before:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"a"}),after:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"aa"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"a"})]}),nodeOnOverflow:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:["...",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{children:"213213"})]})};var __namedExportsOrder=["TempArgs"];TempArgs.parameters={...TempArgs.parameters,docs:{...TempArgs.parameters?.docs,source:{originalSource:'function Template(_ref) {\n  var style = _ref.style,\n    args = _objectWithoutProperties(_ref, _excluded);\n  var _useState = useState({\n      width: "20rem",\n      height: "5rem"\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    styles = _useState2[0],\n    setStyles = _useState2[1];\n  useEffect(function () {\n    var timer = window.setTimeout(function () {\n      setStyles({\n        width: "20rem",\n        height: "5rem"\n      });\n    }, 500);\n    return function () {\n      window.clearTimeout(timer);\n    };\n  }, []);\n  return /*#__PURE__*/_jsx(FixedSizeText, _objectSpread(_objectSpread({}, args), {}, {\n    style: _objectSpread(_objectSpread({}, style), {}, {\n      width: styles.width,\n      height: styles.height\n    })\n  }));\n}',...TempArgs.parameters?.docs?.source}}}}}]);