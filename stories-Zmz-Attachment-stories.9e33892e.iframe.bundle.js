"use strict";(self.webpackChunkdr_pe_ui_storybook=self.webpackChunkdr_pe_ui_storybook||[]).push([[9270],{"./src/stories/Zmz/Attachment.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomNodeSample:()=>CustomNodeSample,DefaultAttachmentSample:()=>DefaultAttachmentSample,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/axios/lib/axios.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_Components_Zmz_Attachment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/Components/Zmz/Attachment/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Zmz/Attachment",component:_Components_Zmz_Attachment__WEBPACK_IMPORTED_MODULE_1__.Pg};var controller,data=[{name:"xx_203101940125基于node+react的记账本设计与实现.pdf",size:3298816,id:1654052702527,status:"pendding",progress:50},{name:"203101940125-张明舟-基于node+react的记账本设计与实现.docx",size:2298816,id:1654052698798,status:"pendding",progress:80},{name:"25-张明舟.pdf",size:1298816,id:1654052521010,status:"pendding",progress:30},{name:"xx_203101940125基于node+react的记账本设计与实现.pdf",size:3298816,id:1654052702327,status:"pendding",progress:50},{name:"203101940125-张明舟-基于node+react的记账本设计与实现.docx",size:2298816,id:1654052648798,status:"pendding",progress:80},{name:"25-张明舟.pdf",size:1298816,id:1654052821010,status:"pendding",progress:30},{name:"25-张明舟.pdf",size:1298816,id:1654222821010,status:"complete"}],DefaultAttachmentSample=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Components_Zmz_Attachment__WEBPACK_IMPORTED_MODULE_1__.Pg,(0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},args))}.bind({});DefaultAttachmentSample.args={defaultfileList:data,onBeforeUpload:function onBeforeUpload(files,refs){console.log("onBeforeUpload",files),console.log(files),Array.prototype.forEach.call(files,(function(file,index){var formData=new FormData;formData.append("attach_file",file),formData.append("invi_tender_id","01GHGJ8AGGTVTH711K8PZ2BZD5"),formData.append("org_id","01GH393H3QBH6TQDRAZ7ZYXVGX"),function postData(formData,_ref){var _onUploadProgress=_ref.onUploadProgress;return controller=new AbortController,axios__WEBPACK_IMPORTED_MODULE_3__.Z.post("https://api.dev.datareachable.net/mkt/v2-temp/dev/invi_tender/attachs",formData,{headers:{"Content-Type":"multipart/form-data","dr-auth":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2xvZ2luLmRldi5kYXRhcmVhY2hhYmxlLm5ldCIsInN1YiI6IjAxR0gzOENYRlg1SE1YTU1aV0VDRVhKODBLIiwibm9uY2UiOiIxaVFTb1dkZGh0N2xkdTE2aE1xSElBOG5QcWFHQXVhaiJ9.8WZ09cg158lYdDNKhwflgQR3Z7sX5v_q2_Ud8_qqd84"},onUploadProgress:function onUploadProgress(progressEvent){var _progressEvent$total,progress=100*progressEvent.loaded/(null!==(_progressEvent$total=progressEvent.total)&&void 0!==_progressEvent$total?_progressEvent$total:1);console.log("uploadProgress",progressEvent,progress),_onUploadProgress(progress)},signal:controller.signal})}(formData,{onUploadProgress:refs[index].setProgress}).then((function(res){if(200===res.status||304===res.status){refs[index].setStatus("complete");var _data=res.data;refs[index].setItemFile({id:_data.data.id,path:_data.data.link})}})).catch((function(err){console.log("err",err),refs[index].setStatus("fail")}))}))},onCancel:function onCancel(item){!function handleCancel(file){var _controller;console.log(file),null===(_controller=controller)||void 0===_controller||_controller.abort()}(item)},onEditConfirm:function onEditConfirm(val,ref){console.log("val",val),console.log("ref",ref),ref.setItemFile({name:val})},onEditCancel:function onEditCancel(){console.log("editCancel")},onDownFile:function onDownFile(file_id,file_name,file_path){(function donwFile(queryData){return axios__WEBPACK_IMPORTED_MODULE_3__.Z.get("https://api.dev.datareachable.net/mkt/v2-temp/dev/invi_tender/attachs",{headers:{"dr-auth":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2xvZ2luLmRldi5kYXRhcmVhY2hhYmxlLm5ldCIsInN1YiI6IjAxR0gzOENYRlg1SE1YTU1aV0VDRVhKODBLIiwibm9uY2UiOiIxaVFTb1dkZGh0N2xkdTE2aE1xSElBOG5QcWFHQXVhaiJ9.8WZ09cg158lYdDNKhwflgQR3Z7sX5v_q2_Ud8_qqd84"},responseType:"blob",params:queryData})})({file_id,project_id:""}).then((function(res){if(console.log("res",res),console.log("file_path",file_path),200===res.status||304===res.status){console.log(res);var url=URL.createObjectURL(res.data),a=document.createElement("a");a.style.display="none",a.href=url,a.download=file_name,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(url)}})).catch((function(err){console.log("err",err)}))},onListUpdate:function onListUpdate(list){console.log("onListUpdate",list)},onFileDelete:function onFileDelete(file){console.log(file)},onFileLimit:function onFileLimit(file){console.log("filelimit",file)},maskClosable:!1,limit:1048576};var CustomNodeSample=function CustomNodeTemplate(args){var _useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),_useState2=(0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_useState,2),show=_useState2[0],setShow=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(data),_useState4=(0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_useState3,2),datas=_useState4[0],setDatas=_useState4[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Components_Zmz_Attachment__WEBPACK_IMPORTED_MODULE_1__.Pg,(0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)((0,C_Users_zmz_Documents_GitHub_dr_Front_ComponentStoryBook_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},args),{},{defaultfileList:datas,isShow:show,onZoomOut:function onZoomOut(){return setShow(!1)},customScaleNode:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{style:{margin:"10px"},onClick:function onClick(){return setShow(!0)},children:"123"})})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{onClick:function onClick(){return setDatas([])},children:"change"})]})}.bind({});CustomNodeSample.args={};var __namedExportsOrder=["DefaultAttachmentSample","CustomNodeSample"];DefaultAttachmentSample.parameters={...DefaultAttachmentSample.parameters,docs:{...DefaultAttachmentSample.parameters?.docs,source:{originalSource:"function Template(args) {\n  return /*#__PURE__*/_jsx(Attachment, _objectSpread({}, args));\n}",...DefaultAttachmentSample.parameters?.docs?.source}}},CustomNodeSample.parameters={...CustomNodeSample.parameters,docs:{...CustomNodeSample.parameters?.docs,source:{originalSource:'function CustomNodeTemplate(args) {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    show = _useState2[0],\n    setShow = _useState2[1];\n  var _useState3 = useState(data),\n    _useState4 = _slicedToArray(_useState3, 2),\n    datas = _useState4[0],\n    setDatas = _useState4[1];\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Attachment, _objectSpread(_objectSpread({}, args), {}, {\n      defaultfileList: datas,\n      isShow: show,\n      onZoomOut: function onZoomOut() {\n        return setShow(false);\n      },\n      customScaleNode: /*#__PURE__*/_jsx("button", {\n        style: {\n          margin: "10px"\n        },\n        onClick: function onClick() {\n          return setShow(true);\n        },\n        children: "123"\n      })\n    })), /*#__PURE__*/_jsx("button", {\n      onClick: function onClick() {\n        return setDatas([]);\n      },\n      children: "change"\n    })]\n  });\n}',...CustomNodeSample.parameters?.docs?.source}}}}}]);